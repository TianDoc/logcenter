<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>日志报警展示</title>
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="description" content="Charisma, a fully featured, responsive, HTML5, Bootstrap admin template.">
    <meta name="author" content="Muhammad Usman">

    <!-- The styles -->
    <link  href="/static/css/bootstrap-cerulean.min.css" rel="stylesheet">	<!--id="bs-css"-->

    <link href="/static/css/charisma-app.css" rel="stylesheet">
    <link href='/static/bower_components/fullcalendar/dist/fullcalendar.css' rel='stylesheet'>
    <link href='/static/bower_components/fullcalendar/dist/fullcalendar.print.css' rel='stylesheet' media='print'>
    <link href='/static/bower_components/chosen/chosen.min.css' rel='stylesheet'>
    <link href='/static/bower_components/colorbox/example3/colorbox.css' rel='stylesheet'>
    <link href='/static/bower_components/responsive-tables/responsive-tables.css' rel='stylesheet'>
    <link href='/static/bower_components/bootstrap-tour/build/css/bootstrap-tour.min.css' rel='stylesheet'>
    <link href='/static/css/jquery.noty.css' rel='stylesheet'>
    <link href='/static/css/noty_theme_default.css' rel='stylesheet'>
    <link href='/static/css/elfinder.min.css' rel='stylesheet'>
    <link href='/static/css/elfinder.theme.css' rel='stylesheet'>
    <link href='/static/css/jquery.iphone.toggle.css' rel='stylesheet'>
    <link href='/static/css/uploadify.css' rel='stylesheet'>
    <link href='/static/css/animate.min.css' rel='stylesheet'>
    <link href="/static/css/bootstrap.min.css" rel="stylesheet">
    <link href="/static/font-awesome/css/font-awesome.css" rel="stylesheet">

    <!-- Toastr style -->
    <link href="/static/css/plugins/toastr/toastr.min.css" rel="stylesheet">

    <!-- Gritter -->
    <link href="/static/js/plugins/gritter/jquery.gritter.css" rel="stylesheet">

    <link href="/static/css/animate.css" rel="stylesheet">
    <link href="/static/css/style.css" rel="stylesheet">
    <!-- jQuery -->
    <script src="/static/bower_components/jquery/jquery.min.js"></script>

    <!-- The HTML5 shim, for IE6-8 support of HTML5 elements -->
    <!--[if lt IE 9]>
    <script src="http://html5shim.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->

    <!-- The fav icon -->
    <link rel="shortcut icon" href="/static/img/favicon.ico">
<script type="text/javascript" src="/static/laydate.js"></script>

<style type="text/css">
*{margin:0;padding:0;list-style:none;}
html{background-color:#E3E3E3; font-size:14px; color:#000; font-family:'微软雅黑'}
h2{line-height:30px; font-size:20px;}
a,a:hover{ text-decoration:none;}
pre{font-family:'微软雅黑'}
.box{width:970px; padding:10px 20px; background-color:#fff; margin:10px auto;}
.box a{padding-right:20px;}
.demo1,.demo2,.demo3,.demo4,.demo5,.demo6{margin:25px 0;}
h3{margin:10px 0;}
.layinput{height: 22px;line-height: 22px;width: 150px;margin: 0;}
</style>

</head>

<body>

    <div id="wrapper">
        <nav class="navbar-default navbar-static-side" role="navigation">
            <div class="sidebar-collapse">
                <ul class="nav metismenu" id="side-menu">
                    <li class="nav-header">
<div class="dropdown profile-element"> <span>
                            <img alt="image" class="img-circle" src="/static/img/IMG_1352.jpg" />
                             </span>
                            <a   href="{% url 'index' %}"  >
                            <span class="clear"> <span class="block m-t-xs"> <strong class="font-bold">_(:3J∠)_</strong>
                             </span>  </span> </a>

                        </div>
                        <div class="logo-element">
                            IN+
                        </div>
                    </li>
                    <li class="active">
                        <a href="#"><i class="fa fa-th-large"></i> <span class="nav-label">错误日志信息</span> <span class="fa arrow"></span></a>
                        <ul class="nav nav-second-level">
                            <li><a href="{% url "logshow" %}">网络设备错误日志</a></li>
                            <li><a href="{% url "historytable" %}">历史日志查询</a></li>
                            <li><a href="{% url "showmessage" %}">日志统计</a></li>
                        </ul>
                    </li>

                     <li >
                        <a href="#"><i class="fa fa-table"></i> <span class="nav-label">后台管理</span><span class="fa arrow"></span></a>
                        <ul class="nav nav-second-level collapse">
                            <li><a href="{% url "grouplist" %}">联系小组管理</a></li>
                            <li><a href="{% url "userlist" %}">联系人管理</a></li>
                            <li><a href="{% url "controllist" %}">筛选条件管理</a></li>
                            <li><a href="{% url "newpasswordget" %}">日志类型管理</a></li>
                            <li><a href="{% url "fastselect" %}">快捷选项管理</a></li>

                        </ul>
                    </li>


        </nav>

        <!--/span-->
        <!-- left menu ends -->


        <div id="page-wrapper" class="gray-bg dashbard-1">
        <div class="row border-bottom">
        <nav class="navbar navbar-static-top" role="navigation" style="margin-bottom: 0">

            <ul class="nav navbar-top-links navbar-right">
                <li>
                    <span class="m-r-sm text-muted welcome-message">Welcome to 雷霆基础日志服务器</span>
                </li>


                <li>
                    <a class="right-sidebar-toggle">
                        <i class="fa fa-tasks"></i>
                    </a>
                </li>

            </ul>


        </nav>
        </div>

        <div class="wrapper wrapper-content animated fadeInRight">
            <div class="row">
                <div class="col-lg-12">
   <div class="ibox float-e-margins">
   <div class="ibox-title">
                        <h5>历史日志</h5>
                        <div class="ibox-tools">
                            <a class="collapse-link">
                                <i class="fa fa-chevron-up"></i>
                            </a>

                            <a class="close-link">
                                <i class="fa fa-times"></i>
                            </a>
                        </div>
                    </div>
<div class="ibox-content ">

<div class="box-content row">
    <form  action="{%url 'historytable'%}" method="get" >
                <p class="  col-md-12">
                    <p class="col-md-1">IP</p>
    <textarea name="ip" class="form-group col-md-3" rows="1">{{ ip }}</textarea>

        <p class="col-md-6">
        <select name="timequit">
            <option value="1"{% if select == 1 %}selected="selected" {% endif %} >最近一天</option>
            <option value="2" {% if select == 2 %}selected="selected" {% endif %} >最近三天</option>
            <option value="3" {% if select == 3 %}selected="selected" {% endif %} >最近七天</option>
        </select>
        <input  class="inline laydate-icon" style="width:150px;" id="hello3" name='starttime' value="{{ starttime }}"></input>
	   <input class="inline laydate-icon" style="width:150px;" id="hello4" name='endtime' value="{{ endtime }}"></input>
    </p>
<p class="col-md-1">
    				<button type="submit" class="btn btn-primary">查询</button>
        </p>
</form>
         </div>
</div>
</div>
                <div class="ibox-content ">

<div class="box-content row">
{#    {% if number != 0 %}#}
{#    <p class="col-md-2">  共有{{number}}条查询结果</p>#}
{#    {%endif%}#}
    <div class="box-content">
    <div class="btn-group">

                            <a class="btn btn-white" href="{% url 'historytable' %}?page={{ page.headpage }}{{ page.type }}">首页</a>
                                {% if page.selectpage != page.headpage %}
                                <a class="btn btn-white" href="{% url 'historytable' %}?page={{ page.page.0 }}{{ page.type }}">...</a>
                                {% endif %}
                                {% for x in page.page%}
                                    <a {% if selectpage == x %} class ="btn btn-white active" {% else %}class="btn btn-white"{% endif %} href="{% url 'historytable' %}?page={{ x }}{{ page.type }}">{{ x }}</a>
                                {% endfor %}
                                {% if  page.selectpage != page.endpage   %}
                                <a class="btn btn-white" href="{% url 'historytable' %}?page={{ page.page.9 }}{{ page.type }}">...</a>
                                {% endif %}
                            <a class="btn btn-white" href="{% url 'historytable' %}?page={{ page.endpage }}{{ page.type }}">尾页</a>

                            <p class="col-md-12">  共有{{page.number}}条查询结果  共有{{ page.endpage }}页</p>
                            </div>
    <table class="table table-striped table-bordered table-hover  dataTables-example" >
    <thead>
    <tr>
        <th>time</th>
        <th>host</th>
        <th>message</th>
    </tr>
    </thead>
    <tbody>
        {% for i in historytable %}
    	<tr>
    		<td class="center">{{ i.time }}</td>
    		<td class="center">{{ i.host }}</td>
    		<td class="center">{{ i.date }}</td>

    	</tr>
        {% endfor %}
    	</tbody>

</div>

<script type="text/javascript">


//日期范围限定在昨天到明天
laydate({
    elem: '#hello3',

	format: 'YYYY-MM-DD hh:mm:ss',

	istime: true,
    min: laydate.now(-30), //-1代表昨天，-2代表前天，以此类推
    max: laydate.now(0) //+1代表明天，+2代表后天，以此类推
});
laydate({

    elem: '#hello4',

	format: 'YYYY-MM-DD hh:mm:ss',

	istime: true,

    min: laydate.now(-180), //-1代表昨天，-2代表前天，以此类推

    max: laydate.now(0) //+1代表明天，+2代表后天，以此类推

});

</script>

<!-- external javascript -->

<script src="/static/bower_components/bootstrap/dist/js/bootstrap.min.js"></script>

<!-- library for cookie management -->
<script src="/static/js/jquery.cookie.js"></script>
<!-- calender plugin -->
<script src='/static/bower_components/moment/min/moment.min.js'></script>
<script src='/static/bower_components/fullcalendar/dist/fullcalendar.min.js'></script>
<!-- data table plugin -->
<script src='/static/js/jquery.dataTables.min.js'></script>

<!-- select or dropdown enhancer -->
<script src="/static/bower_components/chosen/chosen.jquery.min.js"></script>
<!-- plugin for gallery image view -->
<script src="/static/bower_components/colorbox/jquery.colorbox-min.js"></script>
<!-- notification plugin -->
<script src="/static/js/jquery.noty.js"></script>
<!-- library for making tables responsive -->
<script src="/static/bower_components/responsive-tables/responsive-tables.js"></script>
<!-- tour plugin -->
<script src="/static/bower_components/bootstrap-tour/build/js/bootstrap-tour.min.js"></script>
<!-- star rating plugin -->
<script src="/static/js/jquery.raty.min.js"></script>
<!-- for iOS style toggle switch -->
<script src="/static/js/jquery.iphone.toggle.js"></script>
<!-- autogrowing textarea plugin -->
<script src="/static/js/jquery.autogrow-textarea.js"></script>
<!-- multiple file upload plugin -->
<script src="/static/js/jquery.uploadify-3.1.min.js"></script>
<!-- history.js for cross-browser state change on ajax -->
<script src="/static/js/jquery.history.js"></script>
<!-- application script for Charisma demo -->
<script src="/static/js/charisma.js"></script>
    <script src="/static/js/jquery-3.1.1.min.js"></script>
    <script src="/static/js/bootstrap.min.js"></script>
    <script src="/static/js/plugins/metisMenu/jquery.metisMenu.js"></script>
    <script src="/static/js/plugins/slimscroll/jquery.slimscroll.min.js"></script>

    <script src="/static/js/plugins/dataTables/datatables.min.js"></script>

    <!-- Custom and plugin javascript -->
    <script src="/static/js/inspinia.js"></script>
    <script src="/static/js/plugins/pace/pace.min.js"></script>
    <script>
        $(document).ready(function(){
            $('.dataTables-example').DataTable({
                aaSorting: [[ 0, "desc" ]],
                pageLength: 100,
                responsive: true,
                dom: '<"html5buttons"B>lTfgitp',
                buttons: [
                    { extend: 'copy'},
                    {extend: 'csv'},
                    {extend: 'excel', title: 'ExampleFile'},
                    {extend: 'pdf', title: 'ExampleFile'},

                    {extend: 'print',
                     customize: function (win){
                            $(win.document.body).addClass('white-bg');
                            $(win.document.body).css('font-size', '10px');

                            $(win.document.body).find('table')
                                    .addClass('compact')
                                    .css('font-size', 'inherit');
                    }
                    }
                ]

            });

        });

    </script>
</body>
</html>
